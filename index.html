<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heads‑Up Poker — Realtime (Firebase, code-to-join)</title>
  <style>
    :root { --bg:#08301d; --felt:#0d5c3a; --rail:#3b1f0f; --accent:#2bd576; --text:#f7fff9; --muted:#bfe8d1; --danger:#ff6b6b; --line:#145336; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;color:var(--text);background:radial-gradient(1200px 800px at 50% -20%, #116b44 0%, #08301d 60%, #062718 100%);} 
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid var(--line);background:rgba(0,0,0,.25);backdrop-filter: blur(6px);} 
    header h1{font-size:18px;margin:0;font-weight:800;letter-spacing:.3px}
    header .tag{font-size:12px;color:var(--muted)}

    main{display:grid;grid-template-columns:380px 1fr 360px;gap:14px;padding:14px}
    .card{background:rgba(0,0,0,.18);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .section{padding:14px}
    .stack{display:flex;flex-direction:column;gap:10px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row .grow{flex:1}
    input[type=text], input[type=number]{width:100%;background:#072d1b;color:var(--text);border:1px solid var(--line);border-radius:12px;padding:10px 12px}
    button{appearance:none;border:none;border-radius:12px;padding:12px 14px;font-weight:800;cursor:pointer;background:#0a3a22;color:var(--text);border:1px solid #166342;transition:transform .02s ease, background .2s ease}
    button.primary{background:linear-gradient(180deg,#30df89,#1dbf6e);color:#082016;border:none}
    button.warning{background:linear-gradient(180deg,#ffb199,#ff6b6b);color:#2a100f;border:none}
    button:active{transform:translateY(1px)}
    .pill{font-size:12px;background:#0b3a25;border:1px solid #1b6a46;color:var(--muted);padding:4px 8px;border-radius:999px}

    /* Table */
    .table{padding:16px;background:radial-gradient(900px 400px at 50% -80px, #17885a 0%, var(--felt) 50%, #0e5135 100%);border-top:2px solid #0a3a22;border-bottom-left-radius:16px;border-bottom-right-radius:16px;position:relative;overflow:hidden}
    .rim{position:absolute;inset:0;border:18px solid var(--rail);border-radius:28px;pointer-events:none;box-shadow:inset 0 0 0 2px #5a2f17, 0 20px 60px rgba(0,0,0,.35)}
    .pot{font-size:14px;color:#e5ffef;text-shadow:0 2px 8px rgba(0,0,0,.5);text-align:center;margin-bottom:8px}
    .board,.hand{display:flex;gap:12px;justify-content:center}

    /* Big playing cards */
    .card-ui{width:86px;height:118px;border-radius:12px;border:2px solid #e0f8ec;background:linear-gradient(145deg,#ffffff,#d9efe6);display:grid;place-items:center;font-weight:900;font-size:28px;color:#0a1820;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .card-ui.dim{opacity:.4}
    .hand .card-ui{background:linear-gradient(145deg,#ffffff,#eaf7f1)}
    .back{background:repeating-linear-gradient(45deg,#0a3a22,#0a3a22 8px,#125d3c 8px,#125d3c 16px);border-color:#e0f8ec;color:#e0f8ec}

    .name{font-weight:900}
    .you{color:#b6ffd6}
    .opp{color:#cfe8ff}
    .chip{padding:6px 12px;border-radius:999px;border:1px solid #1a704a;background:#0a3a22}
    .money{font-variant-numeric:tabular-nums}
    .controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .log{max-height:220px;overflow:auto;background:#072d1b;border-radius:12px;border:1px solid var(--line);padding:10px;font-size:13px}

    .sep{height:1px;background:var(--line);margin:8px 0}
    .hidden{display:none}
    @media (max-width: 1150px){main{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <header>
    <h1>Heads‑Up Poker <span class="tag">(Firebase — enter the same code)</span></h1>
    <div class="row"><span class="pill" id="connStatus">Not joined</span></div>
  </header>

  <main>
    <!-- LEFT: One‑step join -->
    <section class="card section stack">
      <strong>Join / Host</strong>
      <div class="stack">
        <label>Display name<input id="nameInput" type="text" placeholder="Your name"/></label>
        <div class="row">
          <label class="grow">Game code<input id="codeInput" type="text" placeholder="e.g. POKER-7F3A"/></label>
          <button id="btnRndCode">Random</button>
        </div>
        <div class="row"><button id="btnJoin" class="primary">Enter game</button></div>
        <small class="pill">First to enter claims Host; second is Guest. No P2P — state syncs through Firebase.</small>
      </div>
      <div class="sep"></div>
      <details>
        <summary>Firebase config (paste once)</summary>
        <div class="stack">
          <small class="pill">Create a Firebase project → Realtime Database → Start in test mode (or write secure rules below). Paste config JSON here and click Apply.</small>
          <textarea id="fbCfg" placeholder='{"apiKey":"...","authDomain":"...","databaseURL":"https://YOUR-PROJECT.firebaseio.com","projectId":"...","appId":"..."}'></textarea>
          <div class="row"><button id="applyCfg">Apply config</button><button id="useDemo">Use demo (public sandbox)</button></div>
        </div>
      </details>
    </section>

    <!-- MIDDLE: Table / Game -->
    <section class="card">
      <div class="section stack">
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="row" style="gap:14px;align-items:center">
            <span class="name you" id="youName">You</span>
            <span class="chip">Bank: $<span class="money" id="youBank">1000</span></span>
            <span class="chip">Bet: $<span class="money" id="youBet">0</span></span>
          </div>
          <div class="row" style="gap:14px;align-items:center">
            <span class="name opp" id="oppName">Opponent</span>
            <span class="chip">Bank: $<span class="money" id="oppBank">1000</span></span>
            <span class="chip">Bet: $<span class="money" id="oppBet">0</span></span>
          </div>
        </div>
      </div>
      <div class="table section">
        <div class="rim"></div>
        <div class="pot">Hand <span id="handNo">1</span> • Street: <span id="street">Preflop</span> • Pot: $<span class="money" id="pot">0</span> • <span id="turnTag">Your</span> turn • Code: <span id="codeTag">—</span></div>
        <div class="board" id="board"></div>
        <div class="controls" id="controls">
          <button id="btnDeal" class="primary">Start / Next Hand</button>
          <button id="btnFold" class="warning hidden">Fold</button>
          <button id="btnCheck" class="hidden">Check / Call</button>
          <div id="betWrap" class="row hidden"><input id="betAmt" type="number" min="1" step="1" value="10" style="width:120px"><button id="btnBet">Bet / Raise</button></div>
          <button id="btnShowdown" class="hidden">Showdown</button>
        </div>
        <div class="center" style="margin-top:14px">
          <div class="hand" id="yourHand"></div>
          <div class="hand" id="oppHand"></div>
        </div>
      </div>
      <div class="section">
        <div class="log" id="log"></div>
      </div>
    </section>

    <!-- RIGHT: Settings / Rules -->
    <section class="card section stack">
      <div class="stack">
        <div class="row">
          <label class="row">Small Blind $<input id="sb" type="number" min="1" value="5" style="width:100px"></label>
          <label class="row">Big Blind $<input id="bb" type="number" min="2" value="10" style="width:100px"></label>
        </div>
        <div class="row">
          <label class="row">Starting Bank $<input id="startBank" type="number" min="100" value="1000" style="width:120px"></label>
          <button id="applySettings">Apply</button>
        </div>
        <div class="sep"></div>
        <small class="pill">Recommended Firebase rules snippet is embedded at the bottom of this file.</small>
      </div>
    </section>
  </main>

  <script>
  /******************** Helpers & UI ********************/
  const $ = s=>document.querySelector(s); const logEl=$('#log');
  function log(m){ logEl.innerHTML = `[${new Date().toLocaleTimeString()}] ${m}<br>` + logEl.innerHTML; }
  const statusEl=$('#connStatus'); function setStatus(s){ statusEl.textContent=s; }
  function randomCode(){ const a='ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; let s=''; for(let i=0;i<8;i++) s+=a[Math.floor(Math.random()*a.length)]; return `POKER-${s.match(/.{1,4}/g).join('-')}`; }
  $('#btnRndCode').onclick=()=>{ $('#codeInput').value=randomCode(); };

  // Cards & evaluation
  const SUITS=['♠','♥','♦','♣']; const RANKS=['2','3','4','5','6','7','8','9','T','J','Q','K','A'];
  function makeDeck(){ const d=[]; for(const s of SUITS){ for(const r of RANKS){ d.push(r+s); } } return d; }
  function xorshift32(seed){ let x=seed>>>0; return ()=>{ x^=x<<13; x^=x>>>17; x^=x<<5; return (x>>>0)/0xffffffff; }; }
  function seededShuffle(seed, deck){ const rnd=xorshift32(seed); const a=deck.slice(); for(let i=a.length-1;i>0;i--){ const j=Math.floor(rnd()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
  function codeToSeed(code){ let h=2166136261>>>0; for(const ch of code){ h^=ch.charCodeAt(0); h=(h*16777619)>>>0; } return h; }
  function renderCard(code, dim=false){ const el=document.createElement('div'); el.className='card-ui'+(dim?' dim':''); el.textContent=code; return el; }
  const ranksMap = Object.fromEntries(RANKS.map((r,i)=>[r,i]));
  function evaluate7(cards){ const bySuit={'♠':[], '♥':[], '♦':[], '♣':[]}; const counts=new Map(); for(const c of cards){ const r=c[0], s=c[1]; bySuit[s].push(r); counts.set(r,(counts.get(r)||0)+1); } const allRanks=cards.map(c=>ranksMap[c[0]]).sort((a,b)=>b-a); function straightValue(arr){ const u=[...new Set(arr)].sort((a,b)=>b-a); if(u.includes(12)) u.push(-1); let run=1, best=null; for(let i=0;i<u.length-1;i++){ if(u[i]-1===u[i+1]){ run++; if(run>=5) best=u[i-3]; } else run=1; } return best; } let flushSuit=null, flushRanks=null; for(const s of SUITS){ if(bySuit[s].length>=5){ flushSuit=s; flushRanks=bySuit[s].map(r=>ranksMap[r]).sort((a,b)=>b-a); break; } } const straightHigh=straightValue(allRanks); if(flushSuit){ const sr=bySuit[flushSuit].map(r=>ranksMap[r]).sort((a,b)=>b-a); const sh=straightValue(sr); if(sh!==null && sh!==undefined) return [8,sh]; } const groups=[...counts.entries()].map(([r,c])=>({rv:ranksMap[r],c})).sort((a,b)=> (b.c-a.c)||(b.rv-a.rv)); if(groups[0]?.c===4){ const four=groups[0].rv; const k=Math.max(...allRanks.filter(v=>v!==four)); return [7,four,k]; } if(groups[0]?.c===3 && groups[1]?.c>=2) return [6,groups[0].rv,groups[1].rv]; if(flushSuit) return [5,...flushRanks.slice(0,5)]; if(straightHigh!==null && straightHigh!==undefined) return [4,straightHigh]; if(groups[0]?.c===3){ const t=groups[0].rv; const ks=allRanks.filter(v=>v!==t).slice(0,2); return [3,t,...ks]; } if(groups[0]?.c===2 && groups[1]?.c===2){ const hi=Math.max(groups[0].rv,groups[1].rv), lo=Math.min(groups[0].rv,groups[1].rv); const k=allRanks.filter(v=>v!==hi && v!==lo)[0]; return [2,hi,lo,k]; } if(groups[0]?.c===2){ const p=groups[0].rv; const ks=allRanks.filter(v=>v!==p).slice(0,3); return [1,p,...ks]; } return [0,...allRanks.slice(0,5)]; }
  function compareRanks(a,b){ for(let i=0;i<Math.max(a.length,b.length);i++){ const av=a[i]??-1, bv=b[i]??-1; if(av!==bv) return av-bv; } return 0; }

  /******************** Firebase init ********************/
  let app=null, db=null, uid=null;
  const DEFAULT_DEMO_CFG = {"apiKey":"AIzaSyDEMO-DEMO-DEMO","authDomain":"demo.firebaseapp.com","databaseURL":"https://poker-demo-default-rtdb.firebaseio.com","projectId":"demo","appId":"1:123:web:demo"};

  async function initFirebase(cfg){
    if(app) return;
    app = firebase.initializeApp(cfg);
    db = firebase.database();
    // Anonymous auth (optional). If not enabled, RTDB test rules will still work.
    try{ const userCred = await firebase.auth().signInAnonymously(); uid=userCred.user.uid; }catch(e){ uid = 'anon-'+Math.random().toString(36).slice(2); }
  }

  // Apply config buttons
  $('#applyCfg').onclick = async ()=>{
    try{ const cfg = JSON.parse($('#fbCfg').value.trim()); await initFirebase(cfg); alert('Firebase config applied.'); }
    catch(e){ alert('Invalid JSON config. Paste the Firebase config object.'); }
  };
  $('#useDemo').onclick = async ()=>{ await initFirebase(DEFAULT_DEMO_CFG); alert('Demo Firebase config applied. (Public sandbox)'); };

  /******************** Game state via RTDB ********************/
  let isHost=false, joined=false; let roomRef=null; let unsubscribes=[];
  let state={ code:'', handNo:1, street:'Preflop', dealer:0,
    players:[{name:'Host', bank:1000, bet:0, cards:[], folded:false},{name:'Guest', bank:1000, bet:0, cards:[], folded:false}],
    sb:5, bb:10, pot:0, board:[], turn:0, seed:1234 };
  function youIndex(){ return isHost?0:1; } function oppIndex(){ return isHost?1:0; }
  function updateCodeTag(){ $('#codeTag').textContent = state.code || '—'; }

  async function joinRoom(){
    if(!db){ alert('Apply Firebase config first (or Use demo).'); return; }
    const code=$('#codeInput').value.trim(); if(!code) return alert('Enter a game code');
    state.code=code; updateCodeTag(); setStatus('Joining…');
    roomRef = db.ref('rooms/'+encodeURIComponent(code));

    // Host election: use a transaction to set host if absent
    const hostRef = roomRef.child('meta/host');
    const who = (await hostRef.transaction(cur=> cur||uid )).snapshot.val();
    isHost = (who===uid);

    // Initialize defaults (host only once)
    if(isHost){
      await roomRef.child('state').transaction(cur=> cur||({
        handNo:1, street:'Preflop', dealer:0, sb:5, bb:10, pot:0, board:[], turn:0,
        p0:{name:'Host', bank:1000, bet:0, cards:[], folded:false},
        p1:{name:'Guest', bank:1000, bet:0, cards:[], folded:false}
      }));
    }

    // Presence
    const presRef = roomRef.child('presence/'+uid);
    await presRef.set({name: $('#nameInput').value|| (isHost?'Host':'Guest'), at: firebase.database.ServerValue.TIMESTAMP});
    presRef.onDisconnect().remove();

    // Subscribe to state changes
    unsubscribes.forEach(u=>u()); unsubscribes=[];
    const off = roomRef.child('state').on('value', snap=>{ if(!snap.exists()) return; applyRemoteState(snap.val()); });
    unsubscribes.push(()=> roomRef.child('state').off('value', off));

    // Name updates
    const nameRef = roomRef.child(isHost? 'state/p0/name':'state/p1/name');
    await nameRef.set($('#nameInput').value|| (isHost?'Host':'Guest'));

    joined=true; setStatus(isHost?'Joined as Host':'Joined as Guest'); render();
  }
  $('#btnJoin').onclick=joinRoom;

  function setStatePatch(p){ if(!roomRef) return; roomRef.child('state').update(p); }

  function applyRemoteState(s){
    state.handNo=s.handNo; state.street=s.street; state.dealer=s.dealer; state.sb=s.sb; state.bb=s.bb; state.pot=s.pot; state.board=s.board||[]; state.turn=s.turn||0;
    state.players[0]={name:s.p0.name, bank:s.p0.bank, bet:s.p0.bet, cards:s.p0.cards||[], folded:!!s.p0.folded};
    state.players[1]={name:s.p1.name, bank:s.p1.bank, bet:s.p1.bet, cards:s.p1.cards||[], folded:!!s.p1.folded};
    render();
  }

  // Settings
  function applySettings(){ const sb=parseInt($('#sb').value)||5; const bb=parseInt($('#bb').value)||10; const bk=parseInt($('#startBank').value)||1000; setStatePatch({ sb, bb, p0:{...state.players[0], bank:bk}, p1:{...state.players[1], bank:bk} }); }
  $('#applySettings').onclick=applySettings;
  $('#nameInput').addEventListener('input', ()=>{ const nm=$('#nameInput').value|| (isHost?'Host':'Guest'); if(isHost) setStatePatch({p0:{...state.players[0], name:nm}}); else setStatePatch({p1:{...state.players[1], name:nm}}); });

  // Host-only: start hand / street logic
  function startHand(){ if(!joined) return alert('Join first'); if(!isHost) return alert('Only Host can deal');
    const nonce=(Math.random()*0xffffffff)>>>0; const seed = codeToSeed((state.code||'POKER')+":"+nonce);
    const deck = seededShuffle(seed, makeDeck());
    const p0=[deck.pop(),deck.pop()], p1=[deck.pop(),deck.pop()];
    const d=state.dealer, nd=1-d; const sb=state.sb, bb=state.bb;
    const p0bet = (d===0?sb:bb), p1bet=(d===1?sb:bb);
    setStatePatch({ handNo: state.handNo+1, street:'Preflop', board:[], pot: sb+bb, turn:d,
      p0:{...state.players[0], cards: p0, bet:p0bet, bank: state.players[0].bank - p0bet, folded:false},
      p1:{...state.players[1], cards: p1, bet:p1bet, bank: state.players[1].bank - p1bet, folded:false}
    });
  }
  function nextStreet(){ if(!isHost) return; let street=state.street, board=state.board.slice(); const deck=seededShuffle( codeToSeed(state.code+":"+state.handNo), makeDeck()); // deterministic filler (unused draws ok)
    if(street==='Preflop'){ street='Flop'; board.push(deck.pop(),deck.pop(),deck.pop()); }
    else if(street==='Flop'){ street='Turn'; board.push(deck.pop()); }
    else if(street==='Turn'){ street='River'; board.push(deck.pop()); }
    else { street='Showdown'; }
    setStatePatch({ street, board, p0:{...state.players[0], bet:0}, p1:{...state.players[1], bet:0} });
  }

  function postAction(patch){ if(!isHost) return; setStatePatch(patch); }

  function fold(){ const i=youIndex(); if(isHost){ const w=1-i; postAction({ p0:{...state.players[0], folded:i===0?true:state.players[0].folded}, p1:{...state.players[1], folded:i===1?true:state.players[1].folded}, pWinner:w }); endHand(true); } }
  function checkCall(){ const i=youIndex(), o=oppIndex(); const needed=Math.max(0, state.players[o].bet - state.players[i].bet); if(!isHost){ return; }
    if(needed>0){ const me= i===0?state.players[0]:state.players[1]; const upd=i===0?{p0:{...me, bet:me.bet+needed, bank:me.bank-needed}}:{p1:{...me, bet:me.bet+needed, bank:me.bank-needed}}; const pot=state.pot+needed; setStatePatch({ ...upd, pot }); if(state.players[i].bet+needed===state.players[o].bet){ nextStreet(); setStatePatch({turn:state.dealer}); } }
    else { nextStreet(); setStatePatch({turn:state.dealer}); }
    flipTurn(); }
  function betRaise(){ if(!isHost) return; const i=youIndex(), o=oppIndex(); const amt=parseInt($('#betAmt').value)||0; if(amt<=0) return; const needed=Math.max(0, state.players[o].bet - state.players[i].bet); const total=needed+amt; const me= i===0?state.players[0]:state.players[1]; if(me.bank<total) return alert('Not enough chips'); let upd={}; if(needed>0){ const me2={...me, bet:me.bet+needed, bank:me.bank-needed}; upd = i===0?{p0:me2}:{p1:me2}; setStatePatch({...upd, pot: state.pot+needed}); }
    const me3={...(i===0?state.players[0]:state.players[1])}; me3.bet+=amt; me3.bank-=amt; upd = i===0?{p0:me3}:{p1:me3}; setStatePatch({...upd, pot: state.pot+amt}); flipTurn(); }
  function flipTurn(){ setStatePatch({turn: state.turn?0:1}); }

  function showdown(){ if(!isHost) return; let winner=-1; const p0=evaluate7([...state.players[0].cards,...state.board]); const p1=evaluate7([...state.players[1].cards,...state.board]); const cmp=compareRanks(p0,p1); if(state.players[0].folded) winner=1; else if(state.players[1].folded) winner=0; else winner = cmp>0?0:(cmp<0?1:-1); if(winner===-1){ setStatePatch({ p0:{...state.players[0], bank:state.players[0].bank+Math.floor(state.pot/2)}, p1:{...state.players[1], bank:state.players[1].bank+Math.ceil(state.pot/2)} }); }
    else { const key = winner===0?'p0':'p1'; const w= state.players[winner]; const upd={}; upd[key]={...w, bank:w.bank+state.pot}; setStatePatch(upd); }
    endHand(); }
  function endHand(){ if(!isHost) return; const dealer= state.dealer?0:1; setStatePatch({ pot:0, 'p0/bet':0, 'p1/bet':0, dealer, turn:dealer, street:'Preflop' }); }

  // Wire buttons
  $('#btnDeal').onclick=startHand; $('#btnFold').onclick=fold; $('#btnCheck').onclick=checkCall; $('#btnBet').onclick=betRaise; $('#btnShowdown').onclick=showdown;

  function render(){ $('#youName').textContent=state.players[youIndex()].name + (isHost?' (Host)':''); $('#oppName').textContent=state.players[oppIndex()].name + (!isHost?' (Host)':''); $('#youBank').textContent=state.players[youIndex()].bank; $('#oppBank').textContent=state.players[oppIndex()].bank; $('#youBet').textContent=state.players[youIndex()].bet; $('#oppBet').textContent=state.players[oppIndex()].bet; $('#handNo').textContent=state.handNo; $('#street').textContent=state.street; $('#pot').textContent=state.pot; $('#turnTag').textContent=(state.turn===youIndex())?'Your':'Their'; updateCodeTag();
    const boardEl=$('#board'); boardEl.innerHTML=''; state.board.forEach(c=>boardEl.appendChild(renderCard(c)));
    const yh=$('#yourHand'); yh.innerHTML=''; state.players[youIndex()].cards.forEach(c=>yh.appendChild(renderCard(c)));
    const oh=$('#oppHand'); oh.innerHTML=''; if(state.street==='Showdown'){ state.players[oppIndex()].cards.forEach(c=>oh.appendChild(renderCard(c))); } else { state.players[oppIndex()].cards.forEach(_=>oh.appendChild((()=>{const e=document.createElement('div'); e.className='card-ui back'; e.textContent=''; return e;})())); }
    const yourTurn=state.turn===youIndex(); const inHand=state.board.length>0 || state.street==='Preflop'; $('#btnFold').classList.toggle('hidden', !yourTurn || !inHand || state.street==='Showdown'); $('#btnCheck').classList.toggle('hidden', !yourTurn || state.street==='Showdown'); $('#betWrap').classList.toggle('hidden', !yourTurn || state.street==='Showdown'); $('#btnShowdown').classList.toggle('hidden', !(state.street==='River' || state.street==='Showdown'));
  }
  </script>

  <!-- Firebase SDKs (compat to keep it simple in one file) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

  <!-- Suggested Realtime Database rules (put these in Firebase console → Rules)
  {
    "rules": {
      "rooms": {
        "$code": {
          ".read": true,
          ".write": true,
          "state": {
            ".validate": "newData.hasChildren(['handNo','street','dealer','sb','bb','pot','board','turn','p0','p1'])"
          },
          "meta": {
            "host": { ".validate": "newData.isString() && newData.val().length > 0" }
          }
        }
      }
    }
  }
  -->
</body>
</html>
